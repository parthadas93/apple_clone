(this["webpackJsonpreusable-comps"]=this["webpackJsonpreusable-comps"]||[]).push([[0],{745:function(e,t,o){"use strict";o.r(t);var c=o(2),i=o(7),r=o(1),n=o(9),d=o(77),l=o(5),a=o(126),v={ORDERS_NOW:"ordersNow",TRACK_ORDER:"trackOrder",WE_ARE_WORKING_ON:"weAreWorkingOn",YOUR_ORDER:"yourOrder",HAS_BEEN_CONFIRMED:"hasBeenConfirmed",HAS_SCHEDULED:"hasScheduled",PICKUP:"takeaway",AT:"At",DELIVERY:"delivery"},O=o(8),u=o(3),s=o(40),b=o(343),R=o(0);t.default=function(e){var t=Object(n.b)(),o={history:Object(d.f)()},j=Object(n.c)((function(e){return e})),E=j.tenantReducer,I=j.orderHistoryReducer,f=j.profileReducer,_=j.appStateReducer,D=(_=void 0===_?{}:_).userStatus,S=(D=void 0===D?{}:D).loggedIn,A=Object(r.useState)(!1),H=Object(i.a)(A,2),p=H[0],N=H[1],y=Object(r.useState)(""),T=Object(i.a)(y,2),h=T[0],C=T[1],m=Object(r.useState)(),k=Object(i.a)(m,2),g=k[0],K=k[1],W=function(){g&&(clearTimeout(g),K(void 0))};Object(r.useEffect)((function(){return W(),t(Object(a.e)()),function(){return W()}}),[]);var w=function(){if(S&&(null===f||void 0===f?void 0:f.customerId)&&(null===E||void 0===E?void 0:E.tenantId)&&(null===e||void 0===e?void 0:e.isHeaderTrackOrderEnabled())){t(Object(a.c)({customerId:null===f||void 0===f?void 0:f.customerId,tenantId:null===E||void 0===E?void 0:E.tenantId},{OrderStatus:"",OrderMode:""}))}};Object(r.useEffect)((function(){W(),w()}),[null===f||void 0===f?void 0:f.customerId,null===E||void 0===E?void 0:E.tenantId]);Object(r.useEffect)((function(){var t,o,c,i;I&&(null===I||void 0===I?void 0:I.activeOrderHistory)&&!(null===I||void 0===I?void 0:I.activeOrderHistoryLoading)&&((null===I||void 0===I||null===(t=I.activeOrderHistory)||void 0===t?void 0:t.length)?(!1===(null===E||void 0===E||null===(o=E.componentOptions)||void 0===o||null===(c=o.web)||void 0===c||null===(i=c.global)||void 0===i?void 0:i.showBlackStripWithOrderTracker)&&e.setShowBlackStripeContent(!1),!p&&N(!0),C(U()),!g&&K(setTimeout((function(){W(),w()}),18e4))):p&&N(!1))}),[null===I||void 0===I?void 0:I.activeOrderHistory]);var U=function(){var e,t;if(1!==(null===I||void 0===I||null===(e=I.activeOrderHistory)||void 0===e?void 0:e.length))return"".concat(Object(l.e)(v.WE_ARE_WORKING_ON)," ").concat(null===I||void 0===I||null===(t=I.activeOrderHistory)||void 0===t?void 0:t.length," ").concat(Object(l.e)(v.ORDERS_NOW));var o,c,i=null===I||void 0===I?void 0:I.activeOrderHistory[0];if(!1===(null===i||void 0===i||null===(o=i.requestedDateTime)||void 0===o?void 0:o.isForNow)){var r="".concat(Object(l.e)(v.YOUR_ORDER)," # ").concat(null===i||void 0===i?void 0:i.posOrderId," ").concat(Object(l.e)(v.HAS_SCHEDULED)," ");return Object(u.bc)(null===i||void 0===i?void 0:i.service)===O.A.DELIVERY?"".concat(r," ").concat(Object(l.e)(v.DELIVERY)," ").concat(Object(l.e)(v.AT)):Object(u.bc)(null===i||void 0===i?void 0:i.service)===O.A.PICKUP?"".concat(r," ").concat(Object(l.e)(v.PICKUP)," ").concat(Object(l.e)(v.AT)):"".concat(r)}return Object(u.bc)(null===i||void 0===i?void 0:i.service)===O.A.DELIVERY?"".concat(Object(l.e)(v.YOUR_ORDER)," # ").concat(null===i||void 0===i?void 0:i.posOrderId," ").concat(Object(l.e)(v.HAS_BEEN_CONFIRMED)):Object(u.bc)(null===i||void 0===i?void 0:i.service)===O.A.PICKUP?"".concat(Object(l.e)(v.WE_ARE_WORKING_ON)," ").concat(null===I||void 0===I||null===(c=I.activeOrderHistory)||void 0===c?void 0:c.length," ").concat(Object(l.e)(v.ORDERS_NOW)):void 0},P=Object(r.useCallback)((function(){var e;(null===I||void 0===I||null===(e=I.activeOrderHistory)||void 0===e?void 0:e.length)>1?Object(u.Ub)(o):function(e){if(null===e||void 0===e?void 0:e.id){var t=Object(c.a)(Object(c.a)({},e),{},{customer:null===f||void 0===f?void 0:f.basic}),i=Object(s.w)(null===E||void 0===E?void 0:E.tenantId,t);i.postOrderDetails={},localStorage.setItem(O.S.ORDER_TRACKING,JSON.stringify(i)),Object(u.ac)(o)}else console.error(JSON.stringify(e)),Object(u.Zb)(o)}(null===I||void 0===I?void 0:I.activeOrderHistory[0])}),[]);return p&&Object(R.jsx)(b.a,Object(c.a)(Object(c.a)({},e),{},{testId:"HeaderTrackOrderItems",importPath:"HEADER_ORDER_TRACKER_ITEM",buttonText:Object(l.e)(v.TRACK_ORDER),trackOrderTitle:h,onTrackOrderBtnClickHandler:P}))}}}]);